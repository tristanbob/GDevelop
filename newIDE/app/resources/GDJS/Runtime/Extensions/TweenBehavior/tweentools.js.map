{
  "version": 3,
  "sources": ["../../../../../../../Extensions/TweenBehavior/tweentools.ts"],
  "sourcesContent": ["/// <reference path=\"shifty.d.ts\" />\nnamespace gdjs {\n  export interface RuntimeScene {\n    _tweens: Map<string, shifty.Tweenable>;\n  }\n  export namespace evtTools {\n    export namespace tween {\n      const easingFunctions: Record<string, shifty.easingFunction> = {\n        linear: shifty.Tweenable.formulas.linear,\n        easeInQuad: shifty.Tweenable.formulas.easeInQuad,\n        easeOutQuad: shifty.Tweenable.formulas.easeOutQuad,\n        easeInOutQuad: shifty.Tweenable.formulas.easeInOutQuad,\n        easeInCubic: shifty.Tweenable.formulas.easeInCubic,\n        easeOutCubic: shifty.Tweenable.formulas.easeOutCubic,\n        easeInOutCubic: shifty.Tweenable.formulas.easeInOutCubic,\n        easeInQuart: shifty.Tweenable.formulas.easeInQuart,\n        easeOutQuart: shifty.Tweenable.formulas.easeOutQuart,\n        easeInOutQuart: shifty.Tweenable.formulas.easeInOutQuart,\n        easeInQuint: shifty.Tweenable.formulas.easeInQuint,\n        easeOutQuint: shifty.Tweenable.formulas.easeOutQuint,\n        easeInOutQuint: shifty.Tweenable.formulas.easeInOutQuint,\n        easeInSine: shifty.Tweenable.formulas.easeInSine,\n        easeOutSine: shifty.Tweenable.formulas.easeOutSine,\n        easeInOutSine: shifty.Tweenable.formulas.easeInOutSine,\n        easeInExpo: shifty.Tweenable.formulas.easeInExpo,\n        easeOutExpo: shifty.Tweenable.formulas.easeOutExpo,\n        easeInOutExpo: shifty.Tweenable.formulas.easeInOutExpo,\n        easeInCirc: shifty.Tweenable.formulas.easeInCirc,\n        easeOutCirc: shifty.Tweenable.formulas.easeOutCirc,\n        easeInOutCirc: shifty.Tweenable.formulas.easeInOutCirc,\n        easeOutBounce: shifty.Tweenable.formulas.easeOutBounce,\n        easeInBack: shifty.Tweenable.formulas.easeInBack,\n        easeOutBack: shifty.Tweenable.formulas.easeOutBack,\n        easeInOutBack: shifty.Tweenable.formulas.easeInOutBack,\n        elastic: shifty.Tweenable.formulas.elastic,\n        swingFromTo: shifty.Tweenable.formulas.swingFromTo,\n        swingFrom: shifty.Tweenable.formulas.swingFrom,\n        swingTo: shifty.Tweenable.formulas.swingTo,\n        bounce: shifty.Tweenable.formulas.bounce,\n        bouncePast: shifty.Tweenable.formulas.bouncePast,\n        easeFromTo: shifty.Tweenable.formulas.easeFromTo,\n        easeFrom: shifty.Tweenable.formulas.easeFrom,\n        easeTo: shifty.Tweenable.formulas.easeTo,\n      };\n\n      /**\n       * Tween between 2 values according to an easing function.\n       * @param fromValue Start value\n       * @param toValue End value\n       * @param easingValue Type of easing\n       * @param weighting from 0 to 1\n       */\n      export const ease = (\n        easingValue: string,\n        fromValue: float,\n        toValue: float,\n        weighting: float\n      ) => {\n        const easingFunction = easingFunctions.hasOwnProperty(easingValue)\n          ? easingFunctions[easingValue]\n          : shifty.Tweenable.formulas.linear;\n        return fromValue + (toValue - fromValue) * easingFunction(weighting);\n      };\n\n      const getTweensMap = (runtimeScene: RuntimeScene) =>\n        runtimeScene._tweens || (runtimeScene._tweens = new Map());\n      const getShiftyScene = (runtimeScene: RuntimeScene) =>\n        runtimeScene.shiftyJsScene ||\n        (runtimeScene.shiftyJsScene = new shifty.Scene());\n\n      export const sceneTweenExists = (\n        runtimeScene: RuntimeScene,\n        id: string\n      ) => getTweensMap(runtimeScene).has(id);\n\n      export const sceneTweenIsPlaying = (\n        runtimeScene: RuntimeScene,\n        id: string\n      ) => {\n        const tweenMap = getTweensMap(runtimeScene);\n        const tween = tweenMap.get(id);\n        return !!tween && tween.isPlaying();\n      };\n\n      export const sceneTweenHasFinished = (\n        runtimeScene: RuntimeScene,\n        id: string\n      ) => {\n        const tweenMap = getTweensMap(runtimeScene);\n        const tween = tweenMap.get(id);\n        return !!tween && tween.hasEnded();\n      };\n\n      export const resumeSceneTween = (\n        runtimeScene: RuntimeScene,\n        id: string\n      ) => {\n        const tweenMap = getTweensMap(runtimeScene);\n        const tween = tweenMap.get(id);\n        if (!tween) return;\n        tween.resume();\n        getShiftyScene(runtimeScene).add(tween);\n      };\n\n      export const pauseSceneTween = (\n        runtimeScene: RuntimeScene,\n        id: string\n      ) => {\n        const tweenMap = getTweensMap(runtimeScene);\n        const tween = tweenMap.get(id);\n        if (!tween) return;\n        tween.pause();\n        getShiftyScene(runtimeScene).remove(tween);\n      };\n\n      export const stopSceneTween = (\n        runtimeScene: RuntimeScene,\n        id: string,\n        shouldGoToEnd: boolean\n      ) => {\n        const tweenMap = getTweensMap(runtimeScene);\n        const tween = tweenMap.get(id);\n        if (!tween) return;\n        tween.stop(shouldGoToEnd);\n        getShiftyScene(runtimeScene).remove(tween);\n      };\n\n      export const removeSceneTween = (\n        runtimeScene: RuntimeScene,\n        id: string\n      ) => {\n        const tweenMap = getTweensMap(runtimeScene);\n        const tween = tweenMap.get(id);\n        if (!tween) return;\n        tweenMap.delete(id);\n        getShiftyScene(runtimeScene).remove(tween);\n        tween.stop().dispose();\n      };\n\n      /**\n       * @deprecated Use tweenVariableNumber2 instead.\n       * This function is misleading since one could think that the tween starts\n       * right at the moment this function is called whereas the value of the variable\n       * will change at the next frame only. Moreover, the variable will not start from\n       * the start value exactly since time will have passed at the moment the next\n       * frame is rendered.\n       * See https://github.com/4ian/GDevelop/issues/4270\n       */\n      export const tweenVariableNumber = (\n        runtimeScene: RuntimeScene,\n        identifier: string,\n        variable: Variable,\n        from: number,\n        to: number,\n        duration: number,\n        easing: shifty.easingFunction\n      ) => {\n        const tween = shifty.tween({\n          from: { value: from },\n          to: { value: to },\n          easing,\n          duration,\n          render: ({ value }) => variable.setNumber(value),\n        });\n\n        getTweensMap(runtimeScene).set(identifier, tween);\n        getShiftyScene(runtimeScene).add(tween);\n      };\n\n      export const tweenVariableNumber2 = (\n        runtimeScene: RuntimeScene,\n        identifier: string,\n        variable: Variable,\n        to: number,\n        duration: number,\n        easing: shifty.easingFunction\n      ) => {\n        const tween = shifty.tween({\n          from: { value: variable.getValue() },\n          to: { value: to },\n          easing,\n          duration,\n          render: ({ value }) => variable.setNumber(value),\n        });\n\n        getTweensMap(runtimeScene).set(identifier, tween);\n        getShiftyScene(runtimeScene).add(tween);\n      };\n\n      export const tweenCamera = (\n        runtimeScene: RuntimeScene,\n        identifier: string,\n        toX: number,\n        toY: number,\n        layerName: string,\n        duration: number,\n        easing: shifty.easingFunction\n      ) => {\n        const layer = runtimeScene.getLayer(layerName);\n        const tween = shifty.tween({\n          from: { x: layer.getCameraX(), y: layer.getCameraY() },\n          to: { x: toX, y: toY },\n          easing,\n          duration,\n          render: ({ x, y }) => {\n            layer.setCameraX(x);\n            layer.setCameraY(y);\n          },\n        });\n\n        getTweensMap(runtimeScene).set(identifier, tween);\n        getShiftyScene(runtimeScene).add(tween);\n      };\n\n      export const tweenCameraZoom = (\n        runtimeScene: RuntimeScene,\n        identifier: string,\n        toZoom: number,\n        layerName: string,\n        duration: number,\n        easing: shifty.easingFunction\n      ) => {\n        const layer = runtimeScene.getLayer(layerName);\n        const tween = shifty.tween({\n          from: { zoom: layer.getCameraZoom() },\n          to: { zoom: toZoom },\n          easing,\n          duration,\n          render: ({ zoom }) => {\n            layer.setCameraZoom(zoom);\n          },\n        });\n\n        getTweensMap(runtimeScene).set(identifier, tween);\n        getShiftyScene(runtimeScene).add(tween);\n      };\n\n      export const tweenCameraRotation = (\n        runtimeScene: RuntimeScene,\n        identifier: string,\n        toRotation: number,\n        layerName: string,\n        duration: number,\n        easing: shifty.easingFunction\n      ) => {\n        const layer = runtimeScene.getLayer(layerName);\n        const tween = shifty.tween({\n          from: { rotation: layer.getCameraRotation() },\n          to: { rotation: toRotation },\n          easing,\n          duration,\n          render: ({ rotation }) => {\n            layer.setCameraRotation(rotation);\n          },\n        });\n\n        getTweensMap(runtimeScene).set(identifier, tween);\n        getShiftyScene(runtimeScene).add(tween);\n      };\n    }\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
