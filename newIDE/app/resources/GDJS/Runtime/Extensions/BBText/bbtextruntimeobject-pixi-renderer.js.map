{
  "version": 3,
  "sources": ["../../../../../../../Extensions/BBText/bbtextruntimeobject-pixi-renderer.ts"],
  "sourcesContent": ["declare var MultiStyleText: any;\n\nnamespace gdjs {\n  /**\n   * The PIXI.js renderer for the BBCode Text runtime object.\n   */\n  export class BBTextRuntimeObjectPixiRenderer {\n    _object: gdjs.BBTextRuntimeObject;\n    _pixiObject: any;\n\n    /**\n     * @param runtimeObject The object to render\n     * @param instanceContainer The gdjs.RuntimeInstanceContainer in which the object is\n     */\n    constructor(\n      runtimeObject: gdjs.BBTextRuntimeObject,\n      instanceContainer: gdjs.RuntimeInstanceContainer\n    ) {\n      this._object = runtimeObject;\n\n      // Load (or reset) the text\n      if (this._pixiObject === undefined) {\n        this._pixiObject = new MultiStyleText(runtimeObject._text, {\n          default: {\n            fontFamily: instanceContainer\n              .getGame()\n              .getFontManager()\n              .getFontFamily(runtimeObject._fontFamily),\n            fontSize: runtimeObject._fontSize + 'px',\n            fill: gdjs.rgbToHexNumber(\n              runtimeObject._color[0],\n              runtimeObject._color[1],\n              runtimeObject._color[2]\n            ),\n            tagStyle: 'bbcode',\n            wordWrap: runtimeObject._wordWrap,\n            wordWrapWidth: runtimeObject._wrappingWidth,\n            align: runtimeObject._align,\n          },\n        });\n      } else {\n        this.updateColor();\n        this.updateAlignment();\n        this.updateFontFamily();\n        this.updateFontSize();\n      }\n      instanceContainer\n        .getLayer('')\n        .getRenderer()\n        .addRendererObject(this._pixiObject, runtimeObject.getZOrder());\n\n      // Set the anchor in the center, so that the object rotates around\n      // its center\n      this._pixiObject.anchor.x = 0.5;\n      this._pixiObject.anchor.y = 0.5;\n      this.updateText();\n      this.updatePosition();\n      this.updateAngle();\n      this.updateOpacity();\n    }\n\n    getRendererObject() {\n      return this._pixiObject;\n    }\n\n    updateWordWrap(): void {\n      this._pixiObject._style.wordWrap = this._object._wordWrap;\n      this._pixiObject.dirty = true;\n      this.updatePosition();\n    }\n\n    updateWrappingWidth(): void {\n      this._pixiObject._style.wordWrapWidth = this._object._wrappingWidth;\n      this._pixiObject.dirty = true;\n      this.updatePosition();\n    }\n\n    updateText(): void {\n      this._pixiObject.text = this._object._text;\n      this.updatePosition();\n    }\n\n    updateColor(): void {\n      this._pixiObject.textStyles.default.fill = gdjs.rgbToHexNumber(\n        this._object._color[0],\n        this._object._color[1],\n        this._object._color[2]\n      );\n      this._pixiObject.dirty = true;\n    }\n\n    updateAlignment(): void {\n      this._pixiObject._style.align = this._object._align;\n      this._pixiObject.dirty = true;\n    }\n\n    updateFontFamily(): void {\n      this._pixiObject.textStyles.default.fontFamily = this._object\n        .getInstanceContainer()\n        .getGame()\n        .getFontManager()\n        .getFontFamily(this._object._fontFamily);\n      this._pixiObject.dirty = true;\n    }\n\n    updateFontSize(): void {\n      this._pixiObject.textStyles.default.fontSize =\n        this._object._fontSize + 'px';\n      this._pixiObject.dirty = true;\n    }\n\n    updatePosition(): void {\n      this._pixiObject.position.x = this._object.x + this._pixiObject.width / 2;\n      this._pixiObject.position.y =\n        this._object.y + this._pixiObject.height / 2;\n    }\n\n    updateAngle(): void {\n      this._pixiObject.rotation = gdjs.toRad(this._object.angle);\n    }\n\n    updateOpacity(): void {\n      this._pixiObject.alpha = this._object._opacity / 255;\n    }\n\n    getWidth(): float {\n      return this._pixiObject.width;\n    }\n\n    getHeight(): float {\n      return this._pixiObject.height;\n    }\n  }\n\n  export const BBTextRuntimeObjectRenderer = BBTextRuntimeObjectPixiRenderer;\n  export type BBTextRuntimeObjectRenderer = BBTextRuntimeObjectPixiRenderer;\n}\n"],
  "mappings": "AAEA,GAAU,MAAV,UAAU,EAAV,CAIS,OAAsC,CAQ3C,YACE,EACA,EACA,CACA,KAAK,QAAU,EAGf,AAAI,KAAK,cAAgB,OACvB,KAAK,YAAc,GAAI,gBAAe,EAAc,MAAO,CACzD,QAAS,CACP,WAAY,EACT,UACA,iBACA,cAAc,EAAc,aAC/B,SAAU,EAAc,UAAY,KACpC,KAAM,EAAK,eACT,EAAc,OAAO,GACrB,EAAc,OAAO,GACrB,EAAc,OAAO,IAEvB,SAAU,SACV,SAAU,EAAc,UACxB,cAAe,EAAc,eAC7B,MAAO,EAAc,UAIzB,MAAK,cACL,KAAK,kBACL,KAAK,mBACL,KAAK,kBAEP,EACG,SAAS,IACT,cACA,kBAAkB,KAAK,YAAa,EAAc,aAIrD,KAAK,YAAY,OAAO,EAAI,GAC5B,KAAK,YAAY,OAAO,EAAI,GAC5B,KAAK,aACL,KAAK,iBACL,KAAK,cACL,KAAK,gBAGP,mBAAoB,CAClB,MAAO,MAAK,YAGd,gBAAuB,CACrB,KAAK,YAAY,OAAO,SAAW,KAAK,QAAQ,UAChD,KAAK,YAAY,MAAQ,GACzB,KAAK,iBAGP,qBAA4B,CAC1B,KAAK,YAAY,OAAO,cAAgB,KAAK,QAAQ,eACrD,KAAK,YAAY,MAAQ,GACzB,KAAK,iBAGP,YAAmB,CACjB,KAAK,YAAY,KAAO,KAAK,QAAQ,MACrC,KAAK,iBAGP,aAAoB,CAClB,KAAK,YAAY,WAAW,QAAQ,KAAO,EAAK,eAC9C,KAAK,QAAQ,OAAO,GACpB,KAAK,QAAQ,OAAO,GACpB,KAAK,QAAQ,OAAO,IAEtB,KAAK,YAAY,MAAQ,GAG3B,iBAAwB,CACtB,KAAK,YAAY,OAAO,MAAQ,KAAK,QAAQ,OAC7C,KAAK,YAAY,MAAQ,GAG3B,kBAAyB,CACvB,KAAK,YAAY,WAAW,QAAQ,WAAa,KAAK,QACnD,uBACA,UACA,iBACA,cAAc,KAAK,QAAQ,aAC9B,KAAK,YAAY,MAAQ,GAG3B,gBAAuB,CACrB,KAAK,YAAY,WAAW,QAAQ,SAClC,KAAK,QAAQ,UAAY,KAC3B,KAAK,YAAY,MAAQ,GAG3B,gBAAuB,CACrB,KAAK,YAAY,SAAS,EAAI,KAAK,QAAQ,EAAI,KAAK,YAAY,MAAQ,EACxE,KAAK,YAAY,SAAS,EACxB,KAAK,QAAQ,EAAI,KAAK,YAAY,OAAS,EAG/C,aAAoB,CAClB,KAAK,YAAY,SAAW,EAAK,MAAM,KAAK,QAAQ,OAGtD,eAAsB,CACpB,KAAK,YAAY,MAAQ,KAAK,QAAQ,SAAW,IAGnD,UAAkB,CAChB,MAAO,MAAK,YAAY,MAG1B,WAAmB,CACjB,MAAO,MAAK,YAAY,QA5HrB,EAAM,kCAgIA,8BAA8B,IApInC",
  "names": []
}
