var gdjs;(function(s){const t=new s.Logger("Debugger client (websocket)");class i extends s.AbstractDebuggerClient{constructor(o){super(o);if(this._ws=null,typeof WebSocket=="undefined"){t.log("WebSocket is not defined, the debugger won't work.");return}const c=this;try{const e=o.getAdditionalOptions(),n=e&&e.websocketDebuggerServerAddress||"127.0.0.1",r=e&&e.websocketDebuggerServerPort||"3030";this._ws=new WebSocket("ws://"+n+":"+r+"/")}catch{t.log("WebSocket could not initialize, debugger/hot-reload won't work.");return}this._ws.onopen=function(){t.info("Debugger connection open")},this._ws.onclose=function(){t.info("Debugger connection closed")},this._ws.onerror=function(n){t.warn("Debugger client error:",n)},this._ws.onmessage=function(n){let r=null;try{r=JSON.parse(n.data)}catch(g){t.info("Debugger received a badly formatted message:",g)}c.handleCommand(r)}}_sendMessage(o){if(!this._ws){t.warn("No connection to debugger opened to send a message.");return}this._ws.readyState===1&&this._ws.send(o)}}s.WebsocketDebuggerClient=i,s.DebuggerClient=i})(gdjs||(gdjs={}));
//# sourceMappingURL=websocket-debugger-client.js.map
