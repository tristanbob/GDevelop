var gdjs;(function(h){const u=new h.Logger("Model3DManager");class E{constructor(r,s){this._loadedThreeModels=new Map;this._loader=null;this._dracoLoader=null;this._invalidModel=null;if(this._resources=r,this._resourcesLoader=s,typeof THREE!="undefined"){this._loader=new THREE_ADDONS.GLTFLoader,this._dracoLoader=new THREE_ADDONS.DRACOLoader,this._dracoLoader.setDecoderPath("./pixi-renderers/draco/gltf/"),this._loader.setDRACOLoader(this._dracoLoader);const n=new THREE.BoxGeometry(1,1,1),e=new THREE.MeshBasicMaterial({color:"#ff00ff"});this._invalidModel=new THREE.Mesh(n,e)}}setResources(r){this._resources=r}loadModels(r,s){const e=this._resources.filter(function(t){return t.kind==="model3D"});if(e.length===0||!this._loader)return s(e.length);let o=0;for(let t=0;t<e.length;++t){const d=e[t],i=this._resourcesLoader.getFullUrl(d.file);this._loader.withCredentials=this._resourcesLoader.checkIfCredentialsRequired(i),this._loader.load(i,a=>{a.scene.traverse(c=>{if(c.isMesh){const l=c.material.map;l&&l.isTexture&&(l.encoding=THREE.LinearEncoding)}}),a.scene.rotation.order="ZYX",this._loadedThreeModels.set(d.name,a.scene),o++,o===e.length?s(e.length):r(o,e.length)},void 0,a=>{u.error(a),o++,o===e.length?s(e.length):r(o,e.length)})}}getModel(r){return this._loadedThreeModels.get(r)||this._invalidModel}}h.Model3DManager=E})(gdjs||(gdjs={}));
//# sourceMappingURL=Model3DManager.js.map
